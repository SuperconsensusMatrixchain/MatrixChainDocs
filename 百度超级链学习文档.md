### 创建用户

```sh
# 创建普通用户, 包含地址，公钥，私钥
./xchain-cli account newkeys --output data/bob
```

### 查询资源余额

对于普通账号，可使用如下命令查询账号资源余额，其中 -H 参数为xchain服务的地址

```sh
./xchain-cli account balance --keys data/keys -H 127.0.0.1:37101
```

### 转账

转账操作需要提供源账号的私钥目录，也就类似“创建用户”中生成的目录，这里注意到并不需要提供目标账号的任何密钥，只需要提供地址即可

```sh
# --keys 从此地址 转给 --to地址 --amount 钱
##czojZcZ6cHSiDVJ4jFoZMB1PjKnfUiuFQ为账户私钥
./xchain-cli transfer --to czojZcZ6cHSiDVJ4jFoZMB1PjKnfUiuFQ --amount 10 --keys data/keys/ -H 127.0.0.1:37101

```

### 查询交易信息

通过以下命令可以查询交易的信息，包括交易状态、交易的源和目标账号、交易的金额、所在的区块（如果已上链）等内容

```sh
##cbbda2606837c950160e99480049e2aec3e60689a280b68a2d253fdd8a6ce931为交易ID
./xchain-cli tx query cbbda2606837c950160e99480049e2aec3e60689a280b68a2d253fdd8a6ce931 -H 127.0.0.1:37101
```

### 查询block信息

通过blockid可以查询区块的相关信息，包括区块内打包的交易、所在链的高度、前驱/后继区块的id等内容

```sh
# 可查询上一步交易所在的block id信息
./xchain-cli block 0354240c8335e10d8b48d76c0584e29ab604cfdb7b421d973f01a2a49bb67fee -H 127.0.0.1:37101
```

### 查看链的配置

```sh
cat conf/xchain.yaml
```

## 合约部署

### 查看合约账户部署的合约

```sh
./xchain-cli account contracts --address `cat data/keys/address`
```

### 编译合约

```sh
##             输出文件      编译文件代码
xdev build -o hello.wasm   xxxx
```

### 部署合约

```sh
##                                 合约账号             合约名               费用            合约语言                合约所在目录
./xchain-cli wasm deploy --account bob@xuper --cname hash_deposit  --fee 5200000 --runtime c ./contract/hash_deposit.wasm 
```

### 更新合约

```sh
##                                   合约账号                           合约名          费用              合约所在目录
./xchain-cli wasm upgrade --account XC2222222222222222@xuper --cname hash_deposit2  --fee 5200000  ./contract/hash_deposit.wasm
```

### 调用合约动作

```sh
##                                  方法名                参数                                                         合约名
./xchain-cli wasm invoke --method storeFileInfo -a '{"user_id":"1","hash_id":"1234","file_name":"test"}' --fee 200 hash_deposit2
```

## 源码

TxOfRunningContractGenerate 

预执行当前的交易里面的合约，这里类似于eos的push_trans...都是上链的最后一步

```
doTxInternal 交易执行的核心逻辑
// @tx: 要执行的transaction
// @batch: 对数据的变更写入到batch对象
```

server.go

查询的操作在此文件中

```
ConfirmBlock  区块上链
```

​	uItem := &UtxoItem{}

​    uItem.Amount = big.NewInt(0)

​    uItem.Amount.SetBytes(txOutput.Amount)



tdpos投票单价默认是1，这个可以由提案更改